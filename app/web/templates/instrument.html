{% extends "layout.html" %}
{% block content %}
<h2>Instrument {{isin}}</h2>
<table>
  <thead>
    <tr><th>Time</th><th>Î”YTM bps</th><th>Ask window</th><th>Score</th><th>Flags</th></tr>
  </thead>
  <tbody>
  {% for e in events %}
    <tr>
      <td>{{e.ts}}</td>
      <td>{{"%.1f"|format(e.delta_ytm_bps)}}</td>
      <td>{{e.ask_lots_window}} / {{"%0.0f"|format(e.ask_notional_window)}}</td>
      <td>{{"%.2f"|format(e.score)}}</td>
      <td>
        {% if e.payload %}
          {% set f = [] %}
          {% if e.payload.eligible is not none %}{% set _ = f.append('eligible=' ~ e.payload.eligible) %}{% endif %}
          {% if e.payload.has_call_offer is not none %}{% set _ = f.append('call=' ~ e.payload.has_call_offer) %}{% endif %}
          {% if e.payload.amortization_flag is not none %}{% set _ = f.append('amortization=' ~ e.payload.amortization_flag) %}{% endif %}
          {{ ', '.join(f) }}
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
